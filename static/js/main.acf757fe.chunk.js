(this["webpackJsonpstacks-game"]=this["webpackJsonpstacks-game"]||[]).push([[0],{13:function(e,t,n){e.exports=n(24)},18:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);for(var a=n(0),i=n.n(a),r=n(12),s=n.n(r),o=(n(18),n(6)),c=n(1),u=n(8),l={Columns:15,Rows:20,MillisecondsPerIteration:1e3,StartingLength:6},h="set_row_position",m="add_new_row",f="restart",w={Playing:0,Won:1,Lost:2},d=n(4),g=n(5),v=function(){function e(t,n){Object(d.a)(this,e),this.left=t,this.length=n,this.right=t+n-1}return Object(g.a)(e,[{key:"setLeft",value:function(t){var n=Math.min(Math.max(t,0),l.Columns-this.length);return n===this.left?this:new e(n,this.length)}},{key:"setLength",value:function(t){return new e(this.left,t)}},{key:"isOn",value:function(e){return this.left<=e&&e<=this.right}},{key:"getIntersection",value:function(e){return{left:Math.max(e.left,this.left),right:Math.min(e.right,this.right)}}},{key:"setLeftRight",value:function(t,n){return n<t?new e(this.left,-1):new e(t,n-t+1)}}]),e}(),p=[],y=0;y<l.Rows;y++)y===l.Rows-1?p.push(new v(0,l.StartingLength-1)):p.push(new v(0,-1));var E={rows:p,activeRow:l.Rows-1,gameStatus:w.Playing},R=function(){function e(t){var n=this;Object(d.a)(this,e),this.frame=function(){var e=Date.now(),t=e-n.startTime,a=e-n.lastFrameTime;n.onFrame(n.frameCount,a,t),n.isStarted&&n.isRunning&&(n.frameCount++,n.lastFrameTime=e,n.scheduleNextFrame())},this.cancelFrame=function(){void 0!==n.frameId&&(window.cancelAnimationFrame(n.frameId),n.frameId=void 0)},this.scheduleNextFrame=function(){n.frameId=window.requestAnimationFrame(n.frame)},this.reset=function(){n.startTime=Date.now(),n.lastFrameTime=n.startTime,n.frameCount=0,n.isStarted=!1,n.isRunning=!1},this.onFrame=t,this.reset()}return Object(g.a)(e,[{key:"replaceOnFrame",value:function(e){this.onFrame=e}},{key:"start",value:function(){if(this.isStarted)throw new Error("cannot start the timer when it is already started");this.cancelFrame(),this.reset(),this.isStarted=!0,this.isRunning=!0,this.scheduleNextFrame()}},{key:"stop",value:function(){if(!this.isStarted)throw new Error("cannot stop the timer when it is not started");this.cancelFrame(),this.frameCount=0,this.pauseTime=void 0,this.isStarted=!1,this.isRunning=!1}},{key:"pause",value:function(){if(!this.isRunning)throw new Error("cannot pause when it is not running");if(!this.isStarted)throw new Error("cannot pause when the timer is not started");this.pauseTime=Date.now(),this.cancelFrame(),this.isRunning=!1}},{key:"resume",value:function(){if(this.isRunning)throw new Error("cannot resume when it is running");if(void 0===this.pauseTime)throw new Error("unexpected pauseTime to be undefined when it is paused");var e=Date.now()-this.pauseTime;this.startTime=this.startTime+e,this.lastFrameTime=this.lastFrameTime+e,this.pauseTime=void 0,this.isRunning=!0,this.scheduleNextFrame()}}]),e}(),S=function(e,t,n){return[].concat(Object(u.a)(e.slice(0,t)),[n],Object(u.a)(e.slice(t+1,e.length)))},b=function(e,t){switch(t.type){case h:var n=e.rows[e.activeRow];return e.gameStatus!==w.Playing?e:e=Object(c.a)(Object(c.a)({},e),{},{rows:S(e.rows,e.activeRow,n.setLeft(t.start))});case m:var a,i=e.activeRow-1,r=e.rows[e.activeRow];if(e.activeRow===e.rows.length-1)a=r;else{var s=e.rows[e.activeRow+1].getIntersection(r);a=r.setLeftRight(s.left,s.right)}var o=S(e.rows,e.activeRow,a);if(a.length<0)return Object(c.a)(Object(c.a)({},e),{},{gameStatus:w.Lost});if(i<0)return Object(c.a)(Object(c.a)({},e),{},{rows:o,gameStatus:w.Won});var u=e.rows[i];return Object(c.a)(Object(c.a)({},e),{},{activeRow:i,rows:S(o,i,u.setLength(a.length).setLeft(a.left))});case f:return E;default:return e}},F=function(){var e=i.a.useRef(new R),t=i.a.useReducer(b,E),n=Object(o.a)(t,2),r=n[0],s=n[1],c=function(e,t,n){var a=r.rows[r.activeRow],i=n%l.MillisecondsPerIteration,o=l.Columns-a.length,c=2*o,u=l.MillisecondsPerIteration/c,m=Math.floor(i/u),f=m>o?c-m:m;f!==a.start&&s({type:h,start:f})};Object(a.useEffect)((function(){e.current.replaceOnFrame(c)}),[c]),Object(a.useEffect)((function(){e.current.start()}),[]),Object(a.useEffect)((function(){(r.gameStatus===w.Lost||r.gameStatus===w.Won)&&e.current.stop()}),[r.gameStatus]);var u=i.a.useCallback((function(t){t.preventDefault(),t.stopPropagation(),r.gameStatus===w.Lost?(s({type:f}),e.current.start()):r.gameStatus===w.Playing&&s({type:m})}),[r.gameStatus]);return[r,u]},O={pink:"#FF0EF9"},k=n(7),j=n.n(k),L=function(e){var t=e.color,n=e.isOn,a=e.size,r=n?j()(t).lighten(.4):j()(t).alpha(.3).desaturate(.5);return i.a.createElement("div",{style:{width:a,height:a,borderRadius:"50%",backgroundColor:r,boxShadow:n?"0 0 ".concat(a/2,"px ").concat(t,", 0 0 ").concat(a,"px ").concat(t):void 0}})},x=function(e){var t=e.size;return i.a.createElement("div",{style:{width:t,height:t}})},T=function(e){for(var t=e.color,n=e.dotSize,a=e.rows,r=n/4,s=[],o=0;o<l.Rows;o++){for(var c=[],u=a[o],h=0;h<l.Columns;h++)c.push(i.a.createElement(i.a.Fragment,{key:"cell-".concat(o,":").concat(h)},i.a.createElement(L,{color:t,size:n,isOn:u.isOn(h)}),i.a.createElement(x,{size:r})));s.push(i.a.createElement(i.a.Fragment,{key:"row-".concat(o)},i.a.createElement("div",{style:{display:"flex"}},c),i.a.createElement(x,{size:r})))}return i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},s)},I=function(e){var t=e.gameStatus;return i.a.createElement("h1",{style:{fontWeight:900,marginBottom:"60px",color:"white",fontSize:50,fontFamily:"cursive"}},function(e){switch(e){case w.Won:return"You won!!! Hurray";case w.Lost:return"You lost!!! Please Try again.";case w.Playing:default:return"Welcome to Stacks!"}}(t))},C=function(){var e=F(),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){return window.addEventListener("keydown",r),window.addEventListener("mousedown",r),function(){window.removeEventListener("keydown",r),window.removeEventListener("mousedown",r)}}),[r]),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement(I,{gameStatus:n.gameStatus}),i.a.createElement(T,{color:O.pink,dotSize:20,rows:n.rows}))},P=function(){return i.a.createElement(C,null)};s.a.render(i.a.createElement(a.StrictMode,null,i.a.createElement(P,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.acf757fe.chunk.js.map